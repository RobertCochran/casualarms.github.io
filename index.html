<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Casual ARMS</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css">
	<script src="staff/banners/banner-gen.js"></script>
	<script src="database.js"></script>
	<script src="events.js"></script>
	<script src="script.js"></script>
	<script>
	
	function loadWidgetData(data)
	{
		document.getElementById("footer-discord-text").innerHTML = data.members.length + " members online on Discord. <span style='white-space: nowrap;'>Click here to join!</span>";
	}
	
	function load()
	{
		if (window.location.hash.indexOf("staff") !== -1)
		{
			document.getElementById("staff").style.display = "block";
		}
		
		// Change to event mode
		eventOngoingNow(function(currentEvent)
		{
			if (currentEvent[0] != "none" ||Â window.location.hash.indexOf("event") !== -1)
				document.getElementById("event-id").className += " event " + currentEvent[0] + "-event";
		});
		
		// Add random trivia
		var PRNG = Math.seed(Math.random()*10000);
		document.getElementById("random-fact").innerHTML = generateQuestion(PRNG).trivia;
		
		// Display next event feature
		nextEvents(function(nextEventData)
		{
			if (nextEventData.length > 0)
			{
				document.getElementById("featured").classList = "";
				if (nextEventData[0].type != 2) // Not Clash
					result = generateBanner(880, 480, nextEventData[0], "featured-canvas", true);
				else { // Clash
					document.getElementById("featured-banner").src = "/clash/nextclash.jpg";
					document.getElementById("featured-banner").style.display = "inline-block";
					document.getElementById("featured-canvas").style.display = "none";
					document.getElementById("featured-link").href = "/clash/";
				}
			}
		});
		
		// Discord widget display
		var xmlhttp = new XMLHttpRequest();
		var url = "https://discordapp.com/api/guilds/396373087278465038/widget.json";
		
		xmlhttp.onreadystatechange = function()
		{
			if (this.readyState == 4 && this.status == 200)
			{
				var myArr = JSON.parse(this.responseText);
				loadWidgetData(myArr);
			}
		};
		xmlhttp.open("GET", url, true);
		xmlhttp.send();
	}
	
	function checkKey(e)
	{
		e = e || window.event;
		if (e.keyCode == '13') {
			 document.location.href = document.activeElement.childNodes[1].href;
		}
	}
	document.onkeydown = checkKey;
	
	</script>
	<style type="text/css">
	
	.menu-item {
		overflow: hidden;
		position: relative;
	}
	
	.menu-item a {
		z-index: 1;
	}
	
	.menu-item > img {
		position: absolute;
		z-index: 0;
		opacity: 0;
	}
	
	.menu-item:hover > img {
		opacity: 0.5;
	}
	
	#container.main-menu {
		padding-top: 1em;
		padding-bottom: 0;
	}
	
	.main-menu h3 {
		font-size: 1em;
		margin-top: -0.6em;
		margin-bottom: 0.4em;
		opacity: 0.6;
		text-align: right;
		padding-right: 1em;
		border-bottom: 1pt dotted rgba(0, 0, 0, 0.5);
	}
	
	#logo, #shield {
		position: absolute;
		top: 4%;
		width: 18%;
		z-index: 0;
	}
	
	#logo {
		right: 4%;
		opacity: 0.15;
	}
	
	#shield {
		left: 4%;
		opacity: 0.08;
	}
	
	#arms-text {
		position: absolute;
		top: -100pt;
		left: -150pt;
		color: black;
		opacity: 0.03;
		z-index: 0;
		font-size: 310pt;
		font-family: 'ARMS';
	}
	
	#m-discord      > img { width: 2.0em; left: 25pt; top: 10pt; }
	#m-twitter      > img { width: 3.0em; left: 25pt; top: 5pt; }
	#m-lobby        > img { width: 3.2em; left: 30pt; top: -5pt; }
	#m-leaderboards > img { width: 3.3em; left: 30pt; top: 0pt; }
	#m-quiz         > img { width: 2.9em; left: 40pt; top: -10pt; }
	#m-clash        > img { width: 3.5em; left: 30pt; top: 5pt; }
	#m-screenshot   > img { width: 3.0em; left: 30pt; top: 5pt; }
	
	@keyframes pulse {
		from { transform: scale(1); color: white; }
		50%  { transform: scale(1.1); color: yellow;  }
		to   { transform: scale(1); color: white;  }
	}
	
	.lobby-event #m-lobby { animation: 1s pulse infinite; }
	.lobby-event #m-lobby:after { content: " - Live"; }
	
	.clash-event #m-clash { animation: 1s pulse infinite; }
	.clash-event #m-clash:after { content: " - Live"; }
	
	#featured-aligner {
		white-space: nowrap;
	}
	
	#featured {
		background-color: #1d94fc;
		height: 90pt;
		position: absolute;
		left: -35pt;
		top: 230pt;
		box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.5);
		transform: rotate(-2deg);
		z-index: 10;
		transition: 0.2s transform;
	}
	
	#featured:hover {
		transform: rotate(-2deg) scale(1.3) translateX(20pt);
	}
	
	#featured > .featured-left {
		height: 100%;
		width: 50pt;
		display: inline-block;
		border-right: 2pt dotted yellow;
	}
	
	#featured-banner {
		display: none;
	}
	
	#featured img, #featured canvas {
		height: 80pt;
		margin: 5pt 5pt 5pt 0;
		display: inline-block;
	}
	
	p.bottom  {
		text-align: center;
		font-size: 0.8em;
		padding: 0 5pt;
	}
	
	a#random-fact {
		color: white;
		text-decoration: none;
	}
	
	#main-footer {
		position: relative;
		height: 40pt;
	}
	
	#discord-footer {
		text-align: center;
		display: block;
		background-color: #738bd7;
		height: 100%;
		width: 55%;
		text-decoration: none;
		margin-top: 2em;
		color: white;
	}
	
	#footer-discord-text {
		display: inline-block;
		width: 50%;
		line-height: 1.2em;
		padding: 5pt;
	}
	
	#discord-footer:hover {
		background-color: #5c70ae;
	}
	
	img#discord-logo  {
		height: 20pt;
		position: absolute;
		top: 10pt;
		left: 10pt;
	}
	
	img#patreon-logo  {
		height: 20pt;
		position: absolute;
		top: 10pt;
		right: 10pt;
	}
	
	#featured.featured-hidden {
		display: none !important;
	}
	
	#patreon-footer svg {
		display: block;
		position: absolute;
		right: 0;
		top: 0;
		width: 100%;
		height: 90px;
	}
	
	#patreon-footer svg:hover {
		fill: green;
	}
	
	@media only screen and (max-width: 600px)
	{
		#featured-aligner {
			text-align: left;
		}
		
		#featured {
			display: inline-block;
			position: relative;
			top: 0; left: -30pt;
			margin-top: 1em;
			transform: none;
		}
		
		#featured:hover {
			transform: translateX(20pt);
		}
		
		#discord-footer {
			font-size: 0.8em;
			padding-top: 0;
		}
	}
	
	</style>
</head>

<body id="event-id" onload="load()" ontouchstart="">
	<h1><a href="/">Casual ARMS</a></h1>
	<div class="main-menu" id="container">
		<img src="assets/rank-shield.png" id="shield"/>
		<img src="assets/logo.png" id="logo"/>
		<span id="arms-text">ARMS</span>
		
		<div class="menu-container">
			<!--<a class="menu-item m1" id="m-discord"      href="https://discordapp.com/invite/fQgCuA/"><img src="assets/discord-logo.png"/>Discord Server</a>-->
			<!--<a class="menu-item m2" id="m-twitter"      href="https://twitter.com/casualARMS"><img src="assets/twitter-logo.png"/>Twitter Feed</a>-->
			<a class="menu-item m1" id="m-lobby"        href="lobbies/"><img src="assets/lobby-logo.png"/>Lobby Events</a>
			<a class="menu-item m2" id="m-clash"        href="clash/"><img src="assets/clash-logo.png"/>Casual Clash</a>
			<a class="menu-item m3" id="m-leaderboards" href="leaderboards/"><img src="assets/leaderboards-logo.png"/>Leaderboards</a>
			<a class="menu-item m3" id="m-quiz" href="quiz/"><img src="assets/quiz-logo.png"/>Quiz</a>

			<a class="menu-item m4" id="m-screenshot"   href="screenshot-contest/"><img src="assets/screenshot-logo.png"/>Screenshot Gallery</a>
			<a class="menu-item m5" href="tools/fighter-randomizer/">Fighter + ARMS Randomizer</a>
			<a class="menu-item m5" href="tools/stage-randomizer/">Stage Randomizer</a>
			<a class="menu-item m5" href="tools/stats-generator/">Fighter Stats Generator</a>
		</div>
		
		<div id="staff" style="display: none;">
		<h3>For Staff</h3>
		
		<div class="menu-container">
			<a class="menu-item m5" href="staff/leaderboards/">Leaderboard Tools</a>
			<a class="menu-item m5" href="staff/banners/">Banner Generator</a>
		</div>
		
		</div>
		
		<div id="featured-aligner">
			<div id="featured" class="featured-hidden">
				<div class="featured-left"></div>
				<a href="lobbies/#next" id="featured-link"><img id="featured-banner"/><canvas width="880" height="480" id="featured-canvas"/></a>
			</div>
		</div>
		
		<div class="submenu">
			<a class="submenu-item" href="https://twitter.com/casualARMS" target="_blank"><img src="assets/logo-twitter.png"/><span class="sub-text">Twitter</span></a>
			<!--<a class="submenu-item" href="https://arms.nintendo.com" target="_blank"><img src="assets/logo-nintendo.png"/><span class="sub-text">Nintendo</span></a>-->
			<a class="submenu-item" href="https://reddit.com/r/arms/" target="_blank"><img src="assets/logo-reddit.png"/><span class="sub-text">Reddit</span></a>
			<a class="submenu-item" href="https://armswiki.org/" target="_blank"><img src="assets/logo-wiki.png"/><span class="sub-text">Wiki</span></a>
			<a class="submenu-item" href="https://twitch.tv/schkrimps/" target="_blank"><img src="assets/logo-schkrimps.png"/><span class="sub-text">Schkrimps</span></a>
			<span class="submenu-group">
				<a class="submenu-item long" href="https://twitter.com/SlosherWailord"><img src="assets/logo-champion.png"/><span class="sub-text">Clash Champion</span></a>
				<a class="submenu-item extra" href="https://twitter.com/SlosherWailord">SlosherWailord</a>
			</span>
		</div>
		
		<div id="main-footer">
			<img id="discord-logo" src="assets/discord-logo.png"/>
			<a id="discord-footer" href="https://discord.gg/5A7QkPC"><span id="footer-discord-text"> Join the Discord community!</span></a>
			<a id="patreon-footer">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 10" preserveAspectRatio="none">
					<polygon points="100 0 100 10 45 10 50 0" fill="#f36b61"/>
				</svg>
				<span id="footer-discord-text"> Join the Discord community!</span>
			</a>
			<img id="patreon-logo" src="assets/patreon-logo.png"/>
		</div>
	</div>
	
	<p class="bottom"><a href="quiz/" id="random-fact"></a></p>
	
	<img id="logo-mlm" src="staff/banners/logo-mlm.jpg" style="display: none;"/>
	<img id="logo-cote" src="staff/banners/logo-cote.jpg" style="display: none;"/>
	<img id="logo-discord" src="staff/banners/logo-discord.png" style="display: none;"/>
	<img id="logo-casualarms" src="staff/banners/logo-casualarms.png" style="display: none;"/>

</body>
</html>
