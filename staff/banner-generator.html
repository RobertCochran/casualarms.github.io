---
permalink: /staff/banners/index.html
---
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Banner Generator - Casual ARMS</title>
	<script src="/script/general.js"></script>
	<script src="/script/banner-gen.js"></script>
	<script src="/data/support.js"></script>
	<style>
	
	@font-face {
		font-family: 'ARMS';
		src: url("/assets/ARMSARMSv1.001.ttf");
	}
	
	body {
		background-color: #2f3136;
		color: #c3c4c6;
		font-family: sans-serif;
	}

	#wrapper {
		width: 880px;
		margin: 0 auto;
		padding: 1em 2em;
		background-color: #36393f;
	}

	h1, h2, h3, h4 {
		border-bottom: 1pt solid #3e4147;
		padding-bottom: 0.25em;
		font-family: ARMS;
	}
	
	a {
		color: white;
	}
	
	input {
		background-color: #484b52;
		color: white;
	}
	
	input[type=number] {
		width: 40px;
	}
	
	input[type=number]#year {
		width: 60px;
	}
	
	textarea {
		background-color: black;
		color: white;
		width: 100%;
		font-family: monospace;
	}
	
	</style>
	<script>
	
	var eventsHistory = null;
	
	function load()
	{
		var options = "<option value='undefined' selected>---</option>";
		for (var i = 0; i < eventThemes.length; ++i)
			options += "<option value='" + eventThemes[i].key + "'>" + eventThemes[i].name + "</option>";
		$("theme").innerHTML = options;
		
		// Read old events
		fetchEvents(function(events)
		{
			eventsHistory = events;
			var options = "";
			for (var i = 0; i < events.length; ++i)
			{
				var dateString = dayNames[events[i].date.getUTCDay()] + " " + monthNames[events[i].date.getUTCMonth()] + ' ' + events[i].date.getUTCDate();
				options += "<option>" + dateString + ": " + events[i].titleText + "</option>";
			}
			var eventDataIndex = $("event-history").innerHTML = options;
		});
		
		// Fill quick entry lists
		var hostsList = ["A", "B", "C"];
		for (var i = 0; i < hostsList.length; ++i)
		{
			for (var h = 0; h < hostDatabase.length; ++h)
			{
				var html = "<option value='" + h + "'>" + hostDatabase[h].name + "</option>";
				$("quickEntry" + hostsList[i]).innerHTML += html;
			}
		}
	}
	
	
	function fillFromEventData(eventData)
	{
		var date = new Date(eventData.date);
		var diff = timeZoneOffset(eventData.timeZone);
		convertDates([date], diff);
		
		$("month").selectedIndex = date.getUTCMonth();
		$("day").value = date.getUTCDate();
		$("year").value = date.getFullYear();
		
		$("start-hours").value = date.getUTCHours();
		$("start-minutes").value = date.getUTCMinutes();
		
		$("duration-minutes").value = eventData.duration;
		
		$("timezone").value = eventData.timeZone;
		
		var hostsList = ["A", "B", "C"];
		
		for (var i = 0; i < hostsList.length; ++i)
		{
			var active = (i < eventData.hosts.length);
			$("name" + hostsList[i]).value         = (active ? unEscapeHTML(eventData.hosts[i].name) : "");
			$("tag"  + hostsList[i]).selectedIndex = (active ? ((eventData.hosts[i].tag == "CC") ? 1: 0) : 0);
			$("code" + hostsList[i]).value         = (active ? unEscapeHTML(eventData.hosts[i].code) : "");
			$("host" + hostsList[i]).selectedIndex = (active ? eventData.hosts[i].tier : 0);
		}
		
		$("streamerA").value = $("streamerB").value = $("streamerC").value = "";
		if ("streamers" in eventData)
			for (var i = 0; i < eventData["streamers"].length; ++i)
				$("streamer" + hostsList[i]).value = eventData["streamers"][i];
		
		var themeIndex = 0;
		for (var i = 0; i < eventThemes.length; ++i)
		{
			if (eventData.theme == eventThemes[i].key)
			{
				themeIndex = i+1;
				break;
			}
		}
		
		$("theme").selectedIndex = themeIndex;
		$("title").value = unEscapeHTML(eventData.titleText);
		$("type").selectedIndex = eventData.type;
		$("sponsor").selectedIndex = (eventData.sponsor == "mindgames") ? 1 : 0;
	}
	
	function fillFromEventDataHistory()
	{
		var eventDataIndex = $("event-history").selectedIndex;
		fillFromEventData(eventsHistory[eventDataIndex]);
	}
	
	function fillFromEventDataJSON()
	{
		var json = $("text-output").value;
		var eventdata = JSON.parse(json.substr(1, json.length - 1));
		eventdata.date = new Date(eventdata.date);
		fillFromEventData(eventdata);
	}
	
	function readAndGenerate()
	{
		var eventdata = {};
		
		// Read input from the forms
		var month = $("month").selectedIndex;
		var day = parseInt($("day").value);
		var year = parseInt($("year").value);
		
		var startHours   = parseInt($("start-hours").value);
		var startMinutes = parseInt($("start-minutes").value);
		
		var durationMinutes = parseInt($("duration-minutes").value);
		
		var zoneString  = $("timezone").value;
		var offset = timeZoneOffset(zoneString);
		
		var startDate = new Date(Date.UTC(year, month, day, startHours - offset, startMinutes, 0));
		
		var hostsList = ["A", "B", "C"];
		var hosts = [];
		
		for (var i = 0; i < hostsList.length; ++i)
		{
			var host = {};
			host.name = escapeHTML($("name" + hostsList[i]).value);
			host.tag  = ($("tag" + hostsList[i]).selectedIndex == 1) ? "CC" : "";
			host.code = escapeHTML($("code" + hostsList[i]).value);
			host.tier = $("host" + hostsList[i]).selectedIndex;
			if (host.code != "") hosts.push(host);
		}
		
		var streamers = [];
		for (var i = 0; i < hostsList.length; ++i)
		{
			var streamID = $("streamer" + hostsList[i]).value;
			if (streamID != "") streamers.push(streamID);
		}
		
		var themeIndex = $("theme").selectedIndex;
		
		eventdata.titleText = escapeHTML($("title").value);
		eventdata.type = $("type").selectedIndex;
		eventdata.theme = (themeIndex != 0) ? eventThemes[themeIndex-1].key : "undefined";
		
		eventdata.date = startDate;
		eventdata.duration = durationMinutes;
		eventdata.timeZone = zoneString;
		eventdata.hosts = hosts;
		eventdata.streamers = streamers;
		
		if ($("sponsor").selectedIndex > 0)
			eventdata.sponsor = "mindgames";
		
		$("text-output").value = "," + JSON.stringify(eventdata);
		$("direct-link").href = $("direct-link").innerHTML = "https://www.casualarms.net/events/?id=" + getEventID(eventdata);
		
		generateBanner(880, 480, eventdata, "result", false);
	}
	
	function quickEntry(id)
	{
		var index = $("quickEntry" + id).selectedIndex;
		if (index > 0)
		{
			var useHost = hostDatabase[index-1];
			$("name" + id).value         = useHost.name;
			$("tag"  + id).selectedIndex = (useHost.tag == "CC") ? 1 : 0;
			$("code" + id).value         = useHost.code;
		//	$("host" + id).selectedIndex = useHost.tier;
		}
	}
	
	
</script>
</head>
	<body onLoad="load()">
		<div id="wrapper">
			<h1>Casual ARMS Banner Generator</h1>
			<p>Start from previous event: 
				<select id="event-history"></select>
				<input type="button" value="Fill form from previous event" onClick="fillFromEventDataHistory()"/>
			</p>
			<hr/>
			<p>
				Title: <input type="text" id="title" placeholder="Custom Party Lobby" value="Custom Party Lobby"/>
				Type: <select id="type">
					<option value="0">Leaderboard Lobby</option>
					<option value="1">Impromptu Lobby</option>
					<option value="2">Casual Clash</option>
					<option value="3">MLM Warmup Lobby</option>
					<option value="4">Era Warmup Lobby</option>
					<option value="5">Casual Scramble</option>
					<option value="6">Mario Kart</option>
				</select>
				Theme: <select id="theme"></select>
			</p>
			
			<p>Date: <select id="month">
					<option value="0">January</option>
					<option value="1">February</option>
					<option value="2">March</option>
					<option value="3">April</option>
					<option value="4">May</option>
					<option value="5">June</option>
					<option value="6">July</option>
					<option value="7">August</option>
					<option value="8">September</option>
					<option value="9">October</option>
					<option value="10">November</option>
					<option value="11">December</option>
				</select>
				<input type="number" id="day" value="1"/>
				<input type="number" id="year" value="2018"/>
				Start: <input type="number" id="start-hours" value="14"/> : <input type="number" id="start-minutes" value="00"/>
				in time zone: <input type="text" id="timezone" value="EDT" size="5"/>
				Duration: <input type="number" id="duration-minutes" value="120"/> min.
			</p>
			
			<p>
				<select id="hostA">
					<option value="0" selected>No Tier</option>
					<option value="1">Easy</option>
					<option value="2">Medium</option>
					<option value="3">Hard</option>
				</select>
				host: <select id="tagA">
					<option value="0">--</option>
					<option value="1">CC</option>
				</select>
				<input type="text" id="nameA" placeholder="Player name"/>
				code: <input type="text" id="codeA" placeholder="0000-1111-2222"/>
				[ Quick Entry <select id="quickEntryA" onchange="quickEntry('A');"><option value="0" selected>---</option></select> ]
				<br/>
				<select id="hostB">
					<option value="0" selected>No Tier</option>
					<option value="1">Easy</option>
					<option value="2" >Medium</option>
					<option value="3">Hard</option>
				</select>
				host: <select id="tagB">
					<option value="0">--</option>
					<option value="1">CC</option>
				</select>
				<input type="text" id="nameB" placeholder="Player name"/>
				code: <input type="text" id="codeB" placeholder="0000-1111-2222"/>
				[ Quick Entry <select id="quickEntryB" onchange="quickEntry('B');"><option value="0" selected>---</option></select> ]
				<br/>
				<select id="hostC">
					<option value="0" selected>No Tier</option>
					<option value="1">Easy</option>
					<option value="2">Medium</option>
					<option value="3">Hard</option>
				</select>
				host: <select id="tagC">
					<option value="0">--</option>
					<option value="1">CC</option>
				</select>
				<input type="text" id="nameC" placeholder="Player name"/>
				code: <input type="text" id="codeC" placeholder="0000-1111-2222"/>
				[ Quick Entry <select id="quickEntryC" onchange="quickEntry('C');"><option value="0" selected>---</option></select> ]
			</p>
			
			<p>
				Streamer: <a href=" https://www.twitch.tv">https://www.twitch.tv/</a> <input type="text" id="streamerA" placeholder="twitchID"/><br/>
				Streamer: <a href=" https://www.twitch.tv">https://www.twitch.tv/</a> <input type="text" id="streamerB" placeholder="twitchID"/><br/>
				Streamer: <a href=" https://www.twitch.tv">https://www.twitch.tv/</a> <input type="text" id="streamerC" placeholder="twitchID"/>
			</p>
			
			<p>Sponsor: <select id="sponsor">
					<option value="0" selected>---</option>
					<option value="1">MindGames</option>
				</select>
			</p>
			
			<p><input type="button" value="Generate" onClick="readAndGenerate()"/> <input type="button" value="Fill form from text field" onClick="fillFromEventDataJSON()"/></p>
			
			<!--<canvas width="880" height="480" id="test-canvas"></canvas>-->
			<textarea id="text-output" rows="4"></textarea>
			
			<p>Direct link (valid only after publishing): <a id="direct-link"></a></p>
			<div><img id="result"/></div>
			<p>Have a nice day :)</p>
		</div>
	</body>
</html>
