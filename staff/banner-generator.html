---
permalink: /staff/banners/index.html
---
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Banner Generator - Casual ARMS</title>
	<script src="/script/general.js"></script>
	<script src="/script/banner-gen.js"></script>
	<script src="/data/support.js"></script>
	<style>
	
	@font-face {
		font-family: 'ARMS';
		src: url("/assets/ARMSARMSv1.001.ttf");
	}
	
	body {
		background-color: #2f3136;
		color: #c3c4c6;
		font-family: sans-serif;
	}

	#wrapper {
		width: 880px;
		margin: 0 auto;
		padding: 1em 2em;
		background-color: #36393f;
	}

	h1, h2, h3, h4 {
		border-bottom: 1pt solid #3e4147;
		padding-bottom: 0.25em;
		font-family: ARMS;
	}
	
	a {
		color: white;
	}
	
	input {
		background-color: #484b52;
		color: white;
	}
	
	input[type=number] {
		width: 40px;
	}
	
	input[type=number]#year {
		width: 60px;
	}
	
	textarea {
		background-color: black;
		color: white;
		width: 100%;
		font-family: monospace;
	}
	
	.btn-cpy {
		background-color: yellow;
	}
	
	
	
	
	.stage-container {
		text-align: center;
		background-color: #36393f;
		width: 80%;
		max-width: 250pt;
		margin: 1em auto;
		padding: 0.4em 1em;
		border: 3pt solid #595d69;
		border-radius: 1em;
		box-shadow: 0 0 3pt #36393f;
	}
	
	.stage-container-header
	{
		color: white;
		font-weight: bold;
	}
	
	.stage {
		background-color: black;
		color: white;
		font: 0.8em Helvetica, Arial, sans-serif;
		font-weight: bold;
		font-style: italic;
		padding: 0.3em 0.2em;
		margin: 0.5em;
		border-radius: 0.5em;
		transition: background-color 0.3s;
		
		margin: 0.5em auto;
	}
	
	.stage:hover {
		background-color: white;
		color: black;
	}
	
	.stage.active {
		background-color: yellow;
		color: black;
		font-weight: bold;
	}
	
	.stage.active:after
	{
		content: " ‚óè";
		text-align: left;
	}
	
	.stage.inactive {
		background-color: black;
		opacity: 0.4;
	}
	
	
	/* Lobby settings */
	
	.mode-name {
		width: 50%;
		text-align: right;
		display: inline-block;
		font-weight: bold;
	}
	
	.mode-options {
		background-color: #36393f;
		color: yellow;
		font-weight: bold;
		font-style: italic;
		white-space: pre;
		padding: 2pt 4pt;
		margin-left: 0.5em;
		border: 2pt solid #595d69;
		border-radius: 4pt;
	}
	
	.mode-options.option-off {
		color: lightgray;
	}
	.mode-options.option-on {
		color: yellow;
	}
	
	
	</style>
	<script>
	
	var eventsHistory = null;
	
	function fillGameOptions()
	{
		var game = $("game").options[$("game").selectedIndex].value;
		
		// Themes
		var options = "<option value='undefined' selected>---</option>";
		for (var i = 0; i < eventThemes[game].length; ++i)
			options += "<option value='" + eventThemes[game][i].key + "'>" + eventThemes[game][i].name + "</option>";
		$("theme").innerHTML = options;
		
		// Stage sets
		options = "<option value='undefined' selected>---</option>";
		for (var i = 0; i < stageSets[game].length; ++i)
			options += "<option value='" + stageSets[game][i].key + "'>" + stageSets[game][i].name + "</option>";
		$("stages").innerHTML = options;
		
		// Item sets
		options = "<option value='undefined' selected>---</option>";
		for (var i = 0; i < itemSets[game].length; ++i)
			options += "<option value='" + itemSets[game][i].key + "'>" + itemSets[game][i].name + "</option>";
		$("items").innerHTML = options;
		
		// Event types
		options = "";
		for (var type in eventTypes[game])
			options += "<option value='" + type + "'>" + eventTypes[game][type] + "</option>";
		$("type").innerHTML = options;
	}
	
	function load()
	{
		// Read old events
		fetchEvents(function(events)
		{
			eventsHistory = events;
			var options = "<option value='undefined' selected>---</option>";
			for (var i = 0; i < events.length; ++i)
			{
				var dateString = dayNames[events[i].date.getUTCDay()] + " " + monthNames[events[i].date.getUTCMonth()] + ' ' + events[i].date.getUTCDate();
				options += "<option>" + dateString + ": " + events[i].title + "</option>";
				
				// Add prior hosts to database
				if ("hosts" in events[i])
				{
					outer: 
					for (var eh = 0; eh < events[i].hosts.length; eh++)
					{
						for (var h = 0; h < hostDatabase.length; ++h)
							if (events[i].hosts[eh].code == hostDatabase[h].code || events[i].hosts[eh].name == "")
								continue outer;
						hostDatabase.push(events[i].hosts[eh]);
					}
			}
			$("event-history").innerHTML = options;}
			
			// Fill quick entry lists
			hostDatabase.sort(function(a, b){ return a.name > b.name; });
			var hostsList = ["A", "B", "C"];
			for (var i = 0; i < hostsList.length; ++i)
			{
				for (var h = 0; h < hostDatabase.length; ++h)
				{
					var html = "<option value='" + h + "'>" + hostDatabase[h].name + "</option>";
					$("quickEntry" + hostsList[i]).innerHTML += html;
				}
			}
		});
		
		// Fill event slot selector
		var options = "<option value='undefined' selected>---</option>";
		for (var i = 0; i < eventSlots.length; ++i)
			options += "<option>" + eventGames[eventSlots[i].game] + ": " + eventSlots[i].title + "</option>";
		$("event-slots").innerHTML = options;
		
		// Fill game options
		var options = "";
		for (var game in eventGames)
			options += "<option value='" + game + "'>" + eventGames[game] + "</option>";
		$("game").innerHTML = options;
		
		fillGameOptions();
		readAndGenerate();
	}
	
	
	function fillFromEventData(eventData)
	{
		var date = new Date(eventData.date);
		date.setHours(date.getHours() + timeZoneOffset(eventData.tz));
		
		$("month").selectedIndex = date.getUTCMonth();
		$("day").value = date.getUTCDate();
		$("year").value = date.getFullYear();
		
		$("start-hours").value = date.getUTCHours();
		$("start-minutes").value = date.getUTCMinutes();
		
		$("duration-minutes").value = eventData.duration;
		
		$("timezone").value = eventData.tz;
		
		var hostsList = ["A", "B", "C"];
		var streamersList = ["C"];
		
		for (var i = 0; i < hostsList.length; ++i)
		{
			var active = ("hosts" in eventData && i < eventData.hosts.length);
			$("name" + hostsList[i]).value         = (active ? unEscapeHTML(eventData.hosts[i].name) : "");
			$("tag"  + hostsList[i]).selectedIndex = (active ? ((eventData.hosts[i].tag == "CC") ? 1: 0) : 0);
			$("code" + hostsList[i]).value         = (active ? unEscapeHTML(eventData.hosts[i].code) : "");
			$("host" + hostsList[i]).selectedIndex = (active ? eventData.hosts[i].tier : 0);
		}
		
		for (var i = 0; i < streamersList.length; ++i)
			$("streamer" + streamersList[i]).value = "";
		
		if ("streamers" in eventData)
			for (var i = 0; i < eventData["streamers"].length; ++i)
				$("streamer" + streamersList[i]).value = eventData["streamers"][i];
		
		$("title").value = unEscapeHTML(eventData.title);
		selectOptionWithValue($("game"),    eventData.game);
		fillGameOptions();
		selectOptionWithValue($("type"),    eventData.type);
		selectOptionWithValue($("theme"),   eventData.theme, true);
		selectOptionWithValue($("stages"),  eventData.stages, true);
		selectOptionWithValue($("items"),   eventData.items, true);
		selectOptionWithValue($("sponsor"), eventData.sponsor, true);
		
		readAndGenerate();
	}
	
	function fillFromEventDataHistory()
	{
		var eventDataIndex = $("event-history").selectedIndex;
		if (eventDataIndex > 0)
			fillFromEventData(eventsHistory[eventDataIndex - 1]);
	}
	
	function fillFromEventSlot()
	{
		var eventDataIndex = $("event-slots").selectedIndex;
		if (eventDataIndex > 0)
		{
			var slot = eventSlots[eventDataIndex - 1];
			fillFromEventData({
				"title"    : slot.title,
				"game"     : slot.game,
				"type"     : "",
				"date"     : slot.start,
				"duration" : slot.duration,
				"tz"       : "EST",
				"theme"    : "",
				"stages"   : "",
				"items"    : "",
				"hosts"    : [{"name" : "To Be Announced", "code" : "-"}]
			});
		}
	}
	
	function fillFromEventDataJSON()
	{
		var json = $("text-output").value;
		var eventdata = JSON.parse(json.substr(1, json.length - 1));
		eventdata.date = new Date(eventdata.date);
		fillFromEventData(eventdata);
	}
	
	function readAndGenerate()
	{
		var eventdata = {};
		var game = $("game").options[$("game").selectedIndex].value;
		
		var month           = $("month").selectedIndex;
		var day             = parseInt($("day").value);
		var year            = parseInt($("year").value);
		var startHours      = parseInt($("start-hours").value);
		var startMinutes    = parseInt($("start-minutes").value);
		var durationMinutes = parseInt($("duration-minutes").value);
		var zoneString      = $("timezone").value;
		var offset          = timeZoneOffset(zoneString);
		var startDate       = new Date(Date.UTC(year, month, day, startHours - offset, startMinutes, 0));
		
		var hostsList = ["A", "B", "C"];
		var hosts = [];
		
		for (var i = 0; i < hostsList.length; ++i)
		{
			var host = {
				name: escapeHTML($("name" + hostsList[i]).value),
				code: escapeHTML($("code" + hostsList[i]).value),
			};
			if ($("tag" + hostsList[i]).selectedIndex == 1) host.tag = "CC";
			if ($("host" + hostsList[i]).selectedIndex > 0) host.tier = $("host" + hostsList[i]).selectedIndex;
			if (host.code != "") hosts.push(host);
		}
		
		var streamersList = ["C"];
		var streamers = [];
		for (var i = 0; i < streamersList.length; ++i)
		{
			var streamID = $("streamer" + streamersList[i]).value;
			if (streamID != "") streamers.push(streamID);
		}
		
		eventdata.title = escapeHTML($("title").value);
		eventdata.game = game;
		eventdata.type = $("type").value;
		eventdata.date = startDate;
		eventdata.duration = durationMinutes;
		eventdata.tz = zoneString;
		
		if ($("theme")  .selectedIndex > 0) eventdata.theme   = $("theme")  .value;
		if ($("stages") .selectedIndex > 0) eventdata.stages  = $("stages") .value;
		if ($("items")  .selectedIndex > 0) eventdata.items   = $("items")  .value;
		if ($("sponsor").selectedIndex > 0) eventdata.sponsor = $("sponsor").value;
		
		if (hosts.length > 0)     eventdata.hosts     = hosts;
		if (streamers.length > 0) eventdata.streamers = streamers;
		
		$("text-output").value = "," + JSON.stringify(eventdata);
		$("direct-link").href = $("direct-link").innerHTML = "https://www.casualarms.net/events/?id=" + getEventID(eventdata);
		
		$("preview-theme") .innerHTML = ($("theme") .selectedIndex > 0) ?    printTheme(game,    getTheme(game, $("theme") .value), false) : "";
		$("preview-stages").innerHTML = ($("stages").selectedIndex > 0) ? printStageSet(game, getStageSet(game, $("stages").value))        : "";
		$("preview-items") .innerHTML = ($("items") .selectedIndex > 0) ?  printItemSet(game,  getItemSet(game, $("items").value))         : "";
		
		generateBanner(880, 480, eventdata, "result", false);
		
		return eventdata;
	}
	
	function quickEntry(id)
	{
		var index = $("quickEntry" + id).selectedIndex;
		if (index > 0)
		{
			var useHost = hostDatabase[index-1];
			$("name" + id).value         = useHost.name;
			$("tag"  + id).selectedIndex = (useHost.tag == "CC") ? 1 : 0;
			$("code" + id).value         = useHost.code;
		//	$("host" + id).selectedIndex = useHost.tier;
		}
		else {
			$("name" + id).value = $("code" + id).value = "";
			$("tag"  + id).selectedIndex = 0;
		}
		readAndGenerate();
	}
	
	function fillTBAHost()
	{
		var hostsList = ["A", "B", "C"];
		for (var i = 0; i < hostsList.length; ++i)
		{
			$("name" + hostsList[i]).value         = (i == 0) ? "To Be Announced" : "";
			$("tag"  + hostsList[i]).selectedIndex = 0;
			$("code" + hostsList[i]).value         = (i == 0) ? "-" : "";
			$("host" + hostsList[i]).selectedIndex = 0;
		}
		readAndGenerate();
	}
	
	function addOneWeek()
	{
		var eventdata = readAndGenerate();
		eventdata.date.setDate(eventdata.date.getDate() + 7);
		fillFromEventData(eventdata);
	}
	
	function randomTheme()
	{
		var game = $("game").options[$("game").selectedIndex].value;
		$("theme") .selectedIndex = Math.floor(Math.random() * eventThemes[game].length) + 1;
		$("stages").selectedIndex = Math.floor(Math.random() *   stageSets[game].length) + 1;
		if (game == "smash")
			$("items").selectedIndex = Math.floor(Math.random() * itemSets[game].length) + 1;
		readAndGenerate();
	}
	
	
</script>
</head>
	<body onLoad="load()">
		<div id="wrapper">
			<h1>Casual ARMS Banner Generator</h1>
			<p>
				Start from previous event: <select id="event-history" onChange="fillFromEventDataHistory()"></select><br/>
				Start from event slot:     <select id="event-slots"   onChange="fillFromEventSlot()"></select>
			</p>
			<hr/>
			<p>
				Title:  <input type="text" id="title" placeholder="Custom Party Lobby" value="Custom Party Lobby" onChange="readAndGenerate()"/>
				Game:   <select id="game" onChange="fillGameOptions(); readAndGenerate()"></select>
				Type:   <select id="type" onChange="readAndGenerate()"></select><br/>
			</p>
			<p>
				Modes:  <select id="theme" onChange="readAndGenerate()"></select>
				Stages: <select id="stages" onChange="readAndGenerate()"></select>
				Items: <select id="items" onChange="readAndGenerate()"></select>
				<input type="button" value="Randomize" onClick="randomTheme()"/>
			</p>
			
			<p>Date: <select id="month" onChange="readAndGenerate()">
					<option value="0">January</option>
					<option value="1">February</option>
					<option value="2">March</option>
					<option value="3">April</option>
					<option value="4">May</option>
					<option value="5">June</option>
					<option value="6">July</option>
					<option value="7">August</option>
					<option value="8">September</option>
					<option value="9">October</option>
					<option value="10">November</option>
					<option value="11">December</option>
				</select>
				<input type="number" id="day" value="1" min="1" max="31" onChange="readAndGenerate()"/>
				<input type="number" id="year" value="2018" onChange="readAndGenerate()"/>
				Start: <input type="number" id="start-hours" value="14" min="0" max="23" onChange="readAndGenerate()"/> : <input type="number" id="start-minutes" value="00" min="0" max="59" onChange="readAndGenerate()">
				in time zone: <input type="text" id="timezone" value="EDT" size="5" onChange="readAndGenerate()"/>
				Duration: <input type="number" id="duration-minutes" value="120" min="0" onChange="readAndGenerate()"/> min.
				<input type="button" value="+ 1 week" onClick="addOneWeek()"/>
			</p>
			
			<p>
				<select id="hostA" onChange="readAndGenerate()">
					<option value="0" selected>No Tier</option>
					<option value="1">Easy</option>
					<option value="2">Medium</option>
					<option value="3">Hard</option>
				</select>
				host: <select id="tagA" onChange="readAndGenerate()">
					<option value="0">--</option>
					<option value="1">CC</option>
				</select>
				<input type="text" id="nameA" placeholder="Player name" onChange="readAndGenerate()"/>
				code: <input type="text" id="codeA" placeholder="0000-1111-2222" onChange="readAndGenerate()"/>
				[ Quick Entry <select id="quickEntryA" onchange="quickEntry('A');"><option value="0" selected>---</option></select> ]
				<br/>
				<select id="hostB" onChange="readAndGenerate()">
					<option value="0" selected>No Tier</option>
					<option value="1">Easy</option>
					<option value="2">Medium</option>
					<option value="3">Hard</option>
				</select>
				host: <select id="tagB" onChange="readAndGenerate()">
					<option value="0">--</option>
					<option value="1">CC</option>
				</select>
				<input type="text" id="nameB" placeholder="Player name" onChange="readAndGenerate()"/>
				code: <input type="text" id="codeB" placeholder="0000-1111-2222" onChange="readAndGenerate()"/>
				[ Quick Entry <select id="quickEntryB" onchange="quickEntry('B');"><option value="0" selected>---</option></select> ]
				<br/>
				<select id="hostC" onChange="readAndGenerate()">
					<option value="0" selected>No Tier</option>
					<option value="1">Easy</option>
					<option value="2">Medium</option>
					<option value="3">Hard</option>
				</select>
				host: <select id="tagC" onChange="readAndGenerate()">
					<option value="0">--</option>
					<option value="1">CC</option>
				</select>
				<input type="text" id="nameC" placeholder="Player name" onChange="readAndGenerate()"/>
				code: <input type="text" id="codeC" placeholder="0000-1111-2222" onChange="readAndGenerate()"/>
				[ Quick Entry <select id="quickEntryC" onchange="quickEntry('C');"><option value="0" selected>---</option></select> ]
			</p>
			
			<p>
			<!--	Streamer: <a href=" https://www.twitch.tv">https://www.twitch.tv/</a> <input type="text" id="streamerA" placeholder="twitchID" onChange="readAndGenerate()"/><br/>
			<!--	Streamer: <a href=" https://www.twitch.tv">https://www.twitch.tv/</a> <input type="text" id="streamerB" placeholder="twitchID" onChange="readAndGenerate()"/><br/>-->
				Streamer: <a href=" https://www.twitch.tv">https://www.twitch.tv/</a> <input type="text" id="streamerC" placeholder="twitchID" onChange="readAndGenerate()"/>
				
				Sponsor: <select id="sponsor" onChange="readAndGenerate()">
					<option value="undefined" selected>---</option>
					<option value="mindgames">MindGames</option>
				</select>
				
				<input type="button" value="Make Pre-announcement" onClick="fillTBAHost()"/>
			</p>
			
			<!--<input type="button" value="Generate" onClick="readAndGenerate()"/>-->
			<button onCLick="copyToClipboard('text-output')" class="btn-cpy">Copy to Clipboard</button>
			<input type="button" value="Fill form from text field" onClick="fillFromEventDataJSON()"/>
			
			<!--<canvas width="880" height="480" id="test-canvas"></canvas>-->
			<textarea id="text-output" rows="4"></textarea>
			
			<p>Direct link (valid only after publishing): <a id="direct-link"></a></p>
			<div><img id="result"/></div>
			
			<div id="preview-theme"></div>
			<div id="preview-stages"></div>
			<div id="preview-items"></div>
			<p>Have a nice day :)</p>
		</div>
	</body>
</html>
