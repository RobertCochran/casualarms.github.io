<!doctype HTML>
<html>
<head>
<title>ARMS</title>
<style type="text/css">
	
	@font-face {
		font-family: 'ARMS';
		src: url("../../ARMSARMSv1.001.ttf");
	}
	
	body {
		background-color: #2f3136;
		color: #c3c4c6;
		font-family: sans-serif;
	}

	#wrapper {
		width: 880px;
		margin: 0 auto;
		padding: 1em 2em;
		background-color: #36393f;
	}

	h1, h2, h3, h4 {
		border-bottom: 1pt solid #3e4147;
		padding-bottom: 0.25em;
	}
	
	input {
		background-color: #484b52;
		color: white;
	}

	</style>
<script type="text/javascript">

function generate()
{

function roundRect(ctx, x, y, w, h, r)
{
	if (w < 2 * r) r = w / 2;
	if (h < 2 * r) r = h / 2;
	ctx.beginPath();
	ctx.moveTo(x+r, y);
	ctx.arcTo(x+w, y,   x+w, y+h, r);
	ctx.arcTo(x+w, y+h, x,   y+h, r);
	ctx.arcTo(x,   y+h, x,   y,   r);
	ctx.arcTo(x,   y,   x+w, y,   r);
	ctx.closePath();
	return ctx;
}


var monthNames = [
	"Jan.", "Feb.", "March",
	"April", "May", "June", "July",
	"August", "Sept.", "Oct.",
	"Nov.", "Dec." ];
	
	
var dayNames = [
	"Monday", "Tuesday", "Wednesday",
	"Thursday", "Friday", "Saturday", "Sunday"];

// Read input from the forms
var titleText = document.getElementById("title").value;

var day = parseInt(document.getElementById("day").value);
var monthIndex   = document.getElementById("month").selectedIndex;
var weekdayIndex = document.getElementById("weekday").selectedIndex;

var startTime = document.getElementById("start-time").value;
var endTime   = document.getElementById("end-time").value;
var timeZone  = document.getElementById("timezone").value;


var hostsList = ["A", "B", "C"];
var hosts = [];

for (i = 0; i < hostsList.length; ++i)
{
	var name = document.getElementById("name" + hostsList[i]).value;
	var code = document.getElementById("code" + hostsList[i]).value;
	var tag  = document.getElementById("tag"  + hostsList[i]).selectedIndex;
	var tier = document.getElementById("host" + hostsList[i]).selectedIndex;
	if (name != "")
	{
		hosts.push([name, code, tier, (tag == 1)]);
	}
}

var dateText = dayNames[weekdayIndex] + " " + monthNames[monthIndex] + ' ' + day;
var timeText = startTime + " to " + endTime + " " + timeZone;

// Style presets
backgroundColor = "LightSeaGreen";
titleColor = "yellow";
timeDateColor = "white";
hostsColor = "white";
tierColor = "black";
attributeColor = "rgba(255, 255, 255, 1)";
gridColor = "rgba(255, 255, 255, 0.5)";
highlightColor = "rgba(255, 255, 0, 0.8)";

titleFont = "22pt ARMS";
timeDateFont = "28pt ARMS";
tierFont = "15pt ARMS";
teamTagFont = "14pt ARMS";
hostsFont = "20pt ARMS";

colors = ["#29fb2f", "#efed34", "#fc5935"];
tiers = ["easy", "medium", "hard"];


var mlmMode   = document.getElementById("mlm").checked;
var drawTiers = document.getElementById("tiers").checked && !mlmMode;
var drawCodes = document.getElementById("codes").checked && !mlmMode;

// End of user settings
// (But you can experiment with the code below)

// Initialization
c = document.getElementById("myCanvas");
ctx = c.getContext("2d");


var imgs = document.getElementById("template");
if (mlmMode) imgs = document.getElementById("template-mlm");

ctx.drawImage(imgs, 0, 0);

if (!mlmMode)
{
	// Lobby title
	ctx.font = titleFont;
	ctx.textAlign = "center";
	ctx.fillStyle = titleColor;
	ctx.fillText(titleText, 280, 152);

	// Subtitles
	ctx.fillText("Lobby Hosts", 290, 302);
	
	if (drawCodes)
		ctx.fillText("Lobby Code", 720, 302);
}

vOffset = 0; if (mlmMode) vOffset += 10;
hOffset = 0; if (mlmMode) hOffset += 130;

// Time and date
ctx.font = timeDateFont;
ctx.fillStyle = timeDateColor;
ctx.textAlign = "center";
ctx.fillText(dateText, 300, 210 + vOffset);
ctx.fillText(timeText, 300 + hOffset, 250 + vOffset);

// Hosts
spacing = 35 + (3 - hosts.length) * 10;
for (i = 0; i < hosts.length; i++)
{
	vOffset = 348 + (3 - hosts.length)*15 + spacing * i; if (mlmMode) { vOffset += 10; };
	hOffset = 150; if (mlmMode) { hOffset += 130; };
	
	if (hosts[i][3])
	{
		ctx.font = teamTagFont;
		ctx.fillStyle = hostsColor;
		ctx.textAlign = "left";
		ctx.fillText("CC", hOffset, vOffset);
		hOffset += 40;
	}
	
	ctx.font = hostsFont;
	ctx.fillStyle = hostsColor;
	ctx.textAlign = "left";
	ctx.fillText(hosts[i][0] + "  " + hosts[i][1], hOffset, vOffset);
	
	if (drawTiers)
	{
		ctx.fillStyle = colors[hosts[i][2]];
		roundRect(ctx, 15, vOffset - 21, 120, 25, 10).fill();
		
		ctx.fillStyle = tierColor;
		ctx.font = tierFont;
		ctx.textAlign = "center";
		ctx.fillText(tiers[hosts[i][2]], 75, vOffset - 1);
	}
	
	if (drawCodes)
	{
		ctx.fillStyle = colors[hosts[i][2]];
		roundRect(ctx, 790, vOffset - 21, 75, 25, 10).fill();
		
		ctx.fillStyle = tierColor;
		ctx.font = tierFont;
		ctx.textAlign = "center";
		ctx.fillText(""+(hosts[i][2]+1)+" " + (hosts[i][2]+1)+" " +(hosts[i][2]+1), 827, vOffset - 1);
	}
}

// Generate image
var result = c.toDataURL("image/png");
document.getElementById('result').innerHTML = '<img src="' + result + '"/>';

}
</script>
</head>
	<body onLoad="">
		<div id="wrapper">
		<h1>Casual ARMS Banner Generator</h1>
		<p>Title: <input type="text" name="title" id="title" placeholder="Custom Party Lobby" value="Custom Party Lobby"/>
		Date: <select name="weekday" id="weekday">
			<option value="0">Monday</option>
			<option value="1">Tuesday</option>
			<option value="2">Wednesday</option>
			<option value="3">Thursday</option>
			<option value="4">Friday</option>
			<option value="5">Saturday</option>
			<option value="6">Sunday</option>
		</select>
		<select name="month" id="month">
			<option value="0">January</option>
			<option value="1">February</option>
			<option value="2">March</option>
			<option value="3">April</option>
			<option value="4">May</option>
			<option value="5">June</option>
			<option value="6">July</option>
			<option value="7">August</option>
			<option value="8">September</option>
			<option value="9">October</option>
			<option value="10">November</option>
			<option value="11">December</option>
		</select>
		<input type="number" name="day"  id="day" value="1"/></p>
		
		<p>From <input type="start-time" name="time" id="start-time"  value="2:00 PM"/> to <input type="end-time" name="end-time" id="end-time" value="4:00 PM"/>
		in time zone: <input type="text" name="timezone" id="timezone" value="EDT"/>
		</p>
		
		<p><select name="hostA" id="hostA">
			<option value="0" selected="selected">Easy</option>
			<option value="1">Medium</option>
			<option value="2">Hard</option>
		</select> host: <select name="tagA" id="tagA">
			<option value="0">--</option>
			<option value="1">CC</option>
		</select> <input type="text" id="nameA" value="Easy-Player" placeholder="Easy-Player"/>,   code: <input type="text" id="codeA" value="0000-8888-2222" placeholder="0000-1111-2222"/></p>
		<p><select name="hostB" id="hostB">
			<option value="0">Easy</option>
			<option value="1" selected="selected">Medium</option>
			<option value="2">Hard</option>
		</select> host: <select name="tagB" id="tagB">
			<option value="0">--</option>
			<option value="1">CC</option>
		</select> <input type="text" id="nameB" value="Medium-Player" placeholder="Medium-Player"/>, code: <input type="text" id="codeB" value="0000-8888-2222" placeholder="0000-1111-2222"/></p>
		<p><select name="hostC" id="hostC">
			<option value="0">Easy</option>
			<option value="1">Medium</option>
			<option value="2" selected="selected">Hard</option>
		</select> host: <select name="tagC" id="tagC">
			<option value="0">--</option>
			<option value="1">CC</option>
		</select> <input type="text" id="nameC" value="Hard-Player" placeholder="Hard-Player"/>,   code: <input type="text" id="codeC" value="0000-8888-2222" placeholder="0000-1111-2222"/></p>
		
		<p>Enable tiers: <input type="checkbox" name="tiers" id="tiers" checked/>, code display: <input type="checkbox" name="codes" id="codes" checked/></p>
		<p>MLM mode: <input type="checkbox" name="mlm" id="mlm"/> (overrides some parameters)</p>
		
		<p><input type="button" name="generate" value="Generate" onClick="generate()"/>
		
		
		<img id="template" src="template.png" style="display: none;"/>
		<img id="template-mlm" src="template-mlm.png" style="display: none;"/>
		<div>
			<canvas id="myCanvas" width="880" height="440" style="display: none;"/>
		</div>
    <div id="result">
    
    </div>
    </div>
	</body>
</html>

